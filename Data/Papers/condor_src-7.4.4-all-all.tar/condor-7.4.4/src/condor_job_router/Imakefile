NAME = condor_job_router

all_target( $(NAME) )

NEW_CLASSADS_LINK =  -L$(NEW_CLASSADS_LIB) -lclassad_ns
SCHEDD_INCLUDES = -I$(NEW_CLASSADS_INC)
SCHEDD_FLAGS = $(SCHEDD_INCLUDES)
SCHEDD_LIBS = $(NEW_CLASSADS_LINK)

CFLAGS = $(STD_C_FLAGS) $(SCHEDD_FLAGS)
C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS) $(SCHEDD_FLAGS)
INST_C_PLUS_FLAGS = $(STD_C_FLAGS) $(SCHEDD_FLAGS)
LIB = $(DAEMONCORE_LIB) $(STD_LIBS) $(SCHEDD_LIBS) $(CONFIGURE_GSOAP_LDFLAGS)

#if HAVE_JOB_HOOKS
JOB_HOOKS_OBJS = JobRouterHookMgr.o
#endif /* HAVE_JOB_HOOKS */

soapobjs(job_router)

OBJ = NewClassAdJobLogConsumer.o JobLogMirror.o submit_job.o VanillaToGrid.o JobRouter.o schedd_main.o schedd_v7_utils.o set_user_from_ad.o $(SOAP_OBJS) $(JOB_HOOKS_OBJS) classad_newold.o


c_plus_target($(VANILLATOGRID),$(VANILLATOGRID_OBJS),$(VANILLATOGRID_LIB))
public_c_plus_target($(NAME),libexec,$(OBJ),$(LIB))

public_copy_target(condor_router_q,bin,condor_router_q,EXECUTABLE_MODE)
public_copy_target(condor_router_rm,bin,condor_router_rm,EXECUTABLE_MODE)
public_copy_target(condor_router_history,bin,condor_router_history,EXECUTABLE_MODE)

html:
release:: all
stripped:: all
static:: all
clean::
testbin:: all

gen_soapfiles(job_router,condorJobRouter)

IMPORT_LINKS = ../../config/import_links
import_objs(../condor_c++_util,JobLogMirror.o)
import_objs(../condor_c++_util,classad_newold.o)
