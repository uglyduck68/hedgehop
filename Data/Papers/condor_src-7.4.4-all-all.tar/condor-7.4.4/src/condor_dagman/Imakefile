#if HAVE_EXT_CLASSADS
#define New_classads_lib		-L$(NEW_CLASSADS_LIB) -lclassad_ns
#else
#define New_classads_lib
#endif

NAME = condor_dagman
all_target($(NAME) condor_submit_dag)

C_PLUS_FLAGS = -I. $(STD_C_PLUS_FLAGS) \
	-I../condor_daemon_core.V6 -I.. \
	-Wall $(CONFIGURE_PCRE_CFLAGS)

CFLAGS = $(STD_C_FLAGS) $(CONFIGURE_PCRE_CFLAGS)
LIB = $(DAEMONCORE_LIB) $(STD_LIBS) $(CONFIGURE_GSOAP_LDFLAGS) New_classads_lib $(CONFIGURE_PCRE_LDFLAGS)
TOOL_LIB = $(STD_LIBS) New_classads_lib $(CONFIGURE_PCRE_LDFLAGS)

soapobjs(dagman)

OBJ = dagman_main.o dagman_submit.o dag.o job.o dagman_util.o parse.o debug.o \
	script.o scriptQ.o  dagman_commands.o \
	dagman_multi_dag.o throttle_by_category.o $(SOAP_OBJS)

public_c_plus_target($(NAME),bin,$(OBJ),$(LIB))

public_c_plus_target(condor_submit_dag,bin,condor_submit_dag.o dagman_multi_dag.o,$(TOOL_LIB))

html_target( documentation )

gen_soapfiles(dagman,condorDagman)

testbin:: all
